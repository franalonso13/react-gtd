(this["webpackJsonptfg-v0"]=this["webpackJsonptfg-v0"]||[]).push([[0],{160:function(e,t,a){e.exports=a(364)},165:function(e,t,a){},173:function(e,t,a){},351:function(e,t,a){},364:function(e,t,a){"use strict";a.r(t);var s=a(0),n=a.n(s),o=a(18),c=a.n(o),l=a(14),r=a(15),i=a(19),u=a(16),d=a(17),p=(a(165),a(9)),m=a.n(p),h=(a(166),a(8)),k=a(4),f=a(50),b=(a(42),a(378)),v=a(147),g=a.n(v),E=a(20),j=a.n(E),O=(a(80),function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(e){var s;return Object(l.a)(this,a),(s=t.call(this,e)).state={task:{id:s.props.task.id}},s.handleStateTask=s.handleStateTask.bind(Object(i.a)(s)),s}return Object(r.a)(a,[{key:"handleRemove",value:function(){var e=this,t=this.props.column,a=this.props.task.id,s=t.taskIds;s.splice(this.props.index,1);var n={};n["/users/"+this.props.user.uid+"/tasks/"+a]=null,n["/users/"+this.props.user.uid+"/columns/"+t.id]=Object(k.a)({},t,{taskIds:s}),m.a.database().ref().update(n),delete this.props.stateTasks[this.props.task.id];var o={tasks:this.props.stateTasks,columns:Object(k.a)({},this.props.columns,Object(h.a)({},this.props.column.id,Object(k.a)({},this.props.column,{taskIds:this.props.column.taskIds.filter((function(t){return t!==e.props.task.id}))})))};console.log(o),this.props.onClickClose(o)}},{key:"handleStateTask",value:function(e){this.setState(e)}},{key:"render",value:function(){var e=this,t=null;return void 0!==this.props.task.fechaVencimiento&&null!==this.props.task.fechaVencimiento&&(j.a.locale("es"),t=j()(new Date(this.props.task.fechaVencimiento)).format("DD-MMMM  HH:mm")),n.a.createElement(f.b,{draggableId:this.props.task.id,index:this.props.index},(function(a,s){return n.a.createElement("div",Object.assign({},a.draggableProps,a.dragHandleProps,{ref:a.innerRef,className:"card mb-2 shadow border-0\n\n               ".concat(s.isDragging&&"shadow")}),n.a.createElement("div",{className:"card-body p-2 rounded",style:{backgroundColor:void 0!==e.props.task.colorTask&&void 0!==e.props.task.taskColorType&&"Proyecto"===e.props.task.taskColorType?e.props.task.colorTask:"white",color:"#fff"===e.props.task.colorTask||void 0===e.props.task.taskColorType||void 0!==e.props.task.taskColorType&&"Tarea"===e.props.task.taskColorType?"black":"white",border:void 0!==e.props.task.taskColorType?"2px solid "+e.props.task.colorTask:"none"}},n.a.createElement(b.a,{"aria-label":"delete",className:"p-1 close",onClick:function(){return e.handleRemove()}},n.a.createElement(g.a,{fontSize:"small"})),n.a.createElement("div",{onClick:function(){console.log(e.state.task),e.props.handleClick({visible:!0,task:e.state.task})}},n.a.createElement("p",{className:"m-0"},e.props.task.content),n.a.createElement("p",{className:"font-weight-bold mb-0 mt-1"},t))))}))}}]),a}(n.a.Component)),C=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(e){var s;return Object(l.a)(this,a),(s=t.call(this,e)).state={value:""},s.handleChange=s.handleChange.bind(Object(i.a)(s)),s.handleSubmit=s.handleSubmit.bind(Object(i.a)(s)),s.onClose=s.onClose.bind(Object(i.a)(s)),s}return Object(r.a)(a,[{key:"handleChange",value:function(e){this.setState({value:e.target.value})}},{key:"handleSubmit",value:function(e){var t=this.props.task.id,a=this.props.column,s={};if(""!==this.state.value.trim()){s["/users/"+this.props.user.uid+"/tasks/"+t]={id:t,content:this.state.value,input:!1,colorTask:"#fff"},s["/users/"+this.props.user.uid+"/columns/"+a.id]=Object(k.a)({},a,{taskIds:a.taskIds}),m.a.database().ref().update(s);var n={tasks:Object(k.a)({},this.props.stateTasks,Object(h.a)({},t,{id:t,content:this.state.value,input:!1,colorTask:"#fff"})),columns:Object(k.a)({},this.props.columns,Object(h.a)({},a.id,Object(k.a)({},a,{taskIds:a.taskIds})))};this.props.onClickClose(n)}else this.onClose()}},{key:"onClose",value:function(){var e=this;delete this.props.stateTasks[this.props.task.id];var t={tasks:this.props.stateTasks,columns:Object(k.a)({},this.props.columns,Object(h.a)({},this.props.column.id,Object(k.a)({},this.props.column,{taskIds:this.props.column.taskIds.filter((function(t){return t!==e.props.task.id}))})))};console.log(t),this.props.onClickClose(t)}},{key:"render",value:function(){var e=this;return n.a.createElement("div",null,n.a.createElement("form",null,n.a.createElement("div",{className:"form-group"},n.a.createElement("textarea",{className:"form-control",id:"newTask",rows:"3",value:this.state.value,placeholder:"Escribe una nueva tarea...",onChange:this.handleChange,onKeyDown:function(t){"Enter"===t.key&&e.handleSubmit(t)},autoFocus:!0})),n.a.createElement("button",{type:"button",className:"btn btn-primary btn-sm",onClick:this.handleSubmit},"A\xf1adir"),n.a.createElement("button",{type:"button",className:"close","aria-label":"Close",onClick:this.onClose},n.a.createElement("span",{"aria-hidden":"true"},"\xd7"))))}}]),a}(n.a.Component),y=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(){return Object(l.a)(this,a),t.apply(this,arguments)}return Object(r.a)(a,[{key:"render",value:function(){var e=this;return n.a.createElement(n.a.Fragment,null,n.a.createElement("div",{className:"p-2 text-center bgColorTitleColumn"},n.a.createElement("h5",null,this.props.column.title)),n.a.createElement(f.c,{droppableId:this.props.column.id},(function(t,a){return n.a.createElement("div",Object.assign({},t.droppableProps,{ref:t.innerRef,className:"taskList"}),e.props.tasks.map((function(t,a){return void 0!==t&&void 0!==t.input&&!0===t.input?n.a.createElement(C,{user:e.props.user,key:t.id,stateTasks:e.props.stateTasks,task:t,column:e.props.column,columns:e.props.columns,onClickClose:e.props.onClickClose}):void 0!==t?n.a.createElement(O,{user:e.props.user,column:e.props.column,columns:e.props.columns,key:t.id,task:t,stateTasks:e.props.stateTasks,index:a,onClickClose:e.props.onClickClose,handleClick:e.props.handleClick}):""})),t.placeholder)})))}}]),a}(n.a.Component),T=(a(173),a(148)),N=a(79),w=a(60),x=a(149),I=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(e){var s;return Object(l.a)(this,a),(s=t.call(this,e)).handleChangeComplete=function(e,t){s.setState({background:e.hex});var a={tasks:Object(k.a)({},s.props.tasks,Object(h.a)({},s.props.task.id,Object(k.a)({},s.props.task,{colorTask:e.hex})))};s.props.handleClick(a);var n={tasks:Object(k.a)({},s.props.tasks,Object(h.a)({},s.props.task.id,Object(k.a)({},s.props.task,{colorTask:e.hex}))),task:Object(k.a)({},s.props.task,{colorTask:e.hex})};s.props.handleStateDialog(n),m.a.database().ref("users/"+s.props.user.uid).update(a)},s.handleResetColor=function(e,t){s.setState({background:e});var a={tasks:Object(k.a)({},s.props.tasks,Object(h.a)({},s.props.task.id,Object(k.a)({},s.props.task,{colorTask:e})))};s.props.handleClick(a);var n={tasks:Object(k.a)({},s.props.tasks,Object(h.a)({},s.props.task.id,Object(k.a)({},s.props.task,{colorTask:e}))),task:Object(k.a)({},s.props.task,{colorTask:e})};s.props.handleStateDialog(n),m.a.database().ref("users/"+s.props.user.uid).update(a)},s.state={background:s.props.task.colorTask},s}return Object(r.a)(a,[{key:"render",value:function(){var e=this;return n.a.createElement("div",{className:"d-flex align-items-center"},n.a.createElement(x.CirclePicker,{colors:["#f44336","#e91e63","#9c27b0","#3f51b5","#2196f3","#03a9f4","#00bcd4","#009688","#4caf50","#8bc34a","#cddc39","#ff9800"],color:this.state.background,onChangeComplete:this.handleChangeComplete}),n.a.createElement("button",{className:"button-color ml-3",onClick:function(t){return e.handleResetColor("#fff",t)}},"Quitar color"))}}]),a}(n.a.Component),D=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(e){var s;return Object(l.a)(this,a),(s=t.call(this,e)).state={task:Object(k.a)({},s.props.task,{description:s.props.task.description?s.props.task.description:"",fechaInicio:s.props.task.fechaInicio?new Date(s.props.task.fechaInicio):null,fechaFin:s.props.task.fechaFin?new Date(s.props.task.fechaFin):null,fechaVencimiento:s.props.task.fechaVencimiento?new Date(s.props.task.fechaVencimiento):null}),tasks:s.props.tasks},s.handleEditTask=s.handleEditTask.bind(Object(i.a)(s)),s.handleEditDescription=s.handleEditDescription.bind(Object(i.a)(s)),s.handleStateDialog=s.handleStateDialog.bind(Object(i.a)(s)),s.onBlurHandleTask=s.onBlurHandleTask.bind(Object(i.a)(s)),s.onBlurHandleDes=s.onBlurHandleDes.bind(Object(i.a)(s)),s.textTareaTask=n.a.createRef(),s.textTareaDescription=n.a.createRef(),s}return Object(r.a)(a,[{key:"handleEditTask",value:function(e){this.setState({task:Object(k.a)({},this.state.task,{content:e.target.value})})}},{key:"handleEditDescription",value:function(e){this.setState({task:Object(k.a)({},this.state.task,{description:e.target.value})})}},{key:"onBlurHandleTask",value:function(){if(""!==this.state.task.content.trim()){var e={tasks:Object(k.a)({},this.state.tasks,Object(h.a)({},this.state.task.id,Object(k.a)({},this.state.task,{content:this.state.task.content})))};this.props.handleClick(e),m.a.database().ref("users/"+this.props.user.uid).update(e)}else this.focusTextTarea()}},{key:"focusTextTarea",value:function(){this.textTareaTask.current.focus()}},{key:"onBlurHandleDes",value:function(){var e={tasks:Object(k.a)({},this.state.tasks,Object(h.a)({},this.state.task.id,Object(k.a)({},this.state.task,{description:this.state.task.description})))};this.props.handleClick(e),m.a.database().ref("users/"+this.props.user.uid).update(e)}},{key:"handleStateDialog",value:function(e){this.setState(e)}},{key:"render",value:function(){var e=this,t=n.a.createElement("textarea",{ref:this.textTareaTask,onBlur:this.onBlurHandleTask,onChange:this.handleEditTask,className:"dialog--Task",value:this.state.task.content});return n.a.createElement(T.Dialog,{header:t,visible:this.props.visible,style:{width:"50vw",backgroundColor:"white"},contentStyle:{overflowY:"visible"},modal:!0,blockScroll:!0,maskClassName:"overflow-auto",onHide:function(){""===e.state.task.content.trim()?(e.props.handleClick({visible:!1}),e.setState({task:Object(k.a)({},e.state.task,{content:e.props.task.content})})):e.props.handleClick({visible:!1})}},n.a.createElement("div",null,n.a.createElement("p",{className:"h5 font-weight-bold"},"Descripci\xf3n:")),n.a.createElement("div",{className:"d-block"},n.a.createElement("textarea",{ref:this.textTareaDescription,onBlur:this.onBlurHandleDes,className:"dialog--Description",onChange:this.handleEditDescription,value:this.state.task.description,placeholder:"Introduzca una informaci\xf3n m\xe1s completa..."})),n.a.createElement("div",{className:"d-block"},n.a.createElement("p",{className:"mt-3 mb-3 h6 font-weight-bold"},"Selecciona un color:"),n.a.createElement("div",{className:"d-flex"},n.a.createElement("div",{className:"m-1"},n.a.createElement(w.RadioButton,{inputId:"rbc1",name:"taskColorType",value:"Proyecto",className:"m-1",onChange:function(t){e.setState({task:Object(k.a)({},e.state.task,{taskColorType:t.value}),tasks:Object(k.a)({},e.state.tasks,Object(h.a)({},e.state.task.id,Object(k.a)({},e.state.task,{taskColorType:t.value})))});var a={tasks:Object(k.a)({},e.state.tasks,Object(h.a)({},e.state.task.id,Object(k.a)({},e.state.task,{taskColorType:t.value})))};e.props.handleClick(a),m.a.database().ref("users/"+e.props.user.uid).update(a)},checked:"Proyecto"===this.state.task.taskColorType}),n.a.createElement("label",{htmlFor:"rbc1",className:"p-radiobutton-label"},"Proyecto")),n.a.createElement("div",{className:"m-1"},n.a.createElement(w.RadioButton,{inputId:"rbc2",name:"taskColorType",value:"Tarea",className:"m-1",onChange:function(t){e.setState({task:Object(k.a)({},e.state.task,{taskColorType:t.value}),tasks:Object(k.a)({},e.state.tasks,Object(h.a)({},e.state.task.id,Object(k.a)({},e.state.task,{taskColorType:t.value})))});var a={tasks:Object(k.a)({},e.state.tasks,Object(h.a)({},e.state.task.id,Object(k.a)({},e.state.task,{taskColorType:t.value})))};e.props.handleClick(a),m.a.database().ref("users/"+e.props.user.uid).update(a)},checked:"Tarea"===this.state.task.taskColorType}),n.a.createElement("label",{htmlFor:"rbc2",className:"p-radiobutton-label"},"Tarea"))),n.a.createElement(I,{task:this.state.task,tasks:this.state.tasks,user:this.props.user,handleClick:function(t){return e.props.handleClick(t)},handleStateDialog:function(t){return e.handleStateDialog(t)}})),n.a.createElement("div",null,n.a.createElement("p",{className:" mt-3 mb-3 h6 font-weight-bold"},"Fechas para un evento o una tarea planificada:"),n.a.createElement("div",{className:"m-1"},n.a.createElement(w.RadioButton,{inputId:"rb1",name:"taskType",value:"Tarea Planificada",onChange:function(t){e.setState({task:Object(k.a)({},e.state.task,{taskType:t.value}),tasks:Object(k.a)({},e.state.tasks,Object(h.a)({},e.state.task.id,Object(k.a)({},e.state.task,{taskType:t.value})))});var a={tasks:Object(k.a)({},e.state.tasks,Object(h.a)({},e.state.task.id,Object(k.a)({},e.state.task,{taskType:t.value})))};e.props.handleClick(a),m.a.database().ref("users/"+e.props.user.uid).update(a)},checked:"Tarea Planificada"===this.state.task.taskType}),n.a.createElement("label",{htmlFor:"rb1",className:"p-radiobutton-label"},"Tarea Planificada")),n.a.createElement("div",{className:"m-1"},n.a.createElement(w.RadioButton,{inputId:"rb2",name:"taskType",value:"Evento",onChange:function(t){e.setState({task:Object(k.a)({},e.state.task,{taskType:t.value}),tasks:Object(k.a)({},e.state.tasks,Object(h.a)({},e.state.task.id,Object(k.a)({},e.state.task,{taskType:t.value})))});var a={tasks:Object(k.a)({},e.state.tasks,Object(h.a)({},e.state.task.id,Object(k.a)({},e.state.task,{taskType:t.value})))};e.props.handleClick(a),m.a.database().ref("users/"+e.props.user.uid).update(a)},checked:"Evento"===this.state.task.taskType}),n.a.createElement("label",{htmlFor:"rb2",className:"p-radiobutton-label"},"Evento")),n.a.createElement("div",{className:"d-flex flex-wrap m-2"},n.a.createElement(N.Calendar,{className:"m-2",minDate:new Date,maxDate:this.state.task.fechaFin,showTime:!0,hourFormat:"24",value:this.state.task.fechaInicio,onChange:function(t){e.setState({task:Object(k.a)({},e.state.task,{fechaInicio:t.value}),tasks:Object(k.a)({},e.state.tasks,Object(h.a)({},e.state.task.id,Object(k.a)({},e.state.task,{fechaInicio:t.value})))});var a={tasks:Object(k.a)({},e.state.tasks,Object(h.a)({},e.state.task.id,Object(k.a)({},e.state.task,{fechaInicio:t.value})))};e.props.handleClick(a),m.a.database().ref("users/"+e.props.user.uid).update(a)}}),n.a.createElement(N.Calendar,{className:"m-2",minDate:null!==this.state.task.fechaInicio?new Date(this.state.task.fechaInicio):new Date,showTime:!0,hourFormat:"24",value:this.state.task.fechaFin,onChange:function(t){e.setState({task:Object(k.a)({},e.state.task,{fechaFin:t.value}),tasks:Object(k.a)({},e.state.tasks,Object(h.a)({},e.state.task.id,Object(k.a)({},e.state.task,{fechaFin:t.value})))});var a={tasks:Object(k.a)({},e.state.tasks,Object(h.a)({},e.state.task.id,Object(k.a)({},e.state.task,{fechaFin:t.value})))};e.props.handleClick(a),m.a.database().ref("users/"+e.props.user.uid).update(a)}})),n.a.createElement("p",{className:" mt-3 mb-3 h6 font-weight-bold"},"Fecha de vencimiento:"),n.a.createElement(N.Calendar,{showTime:!0,minDate:new Date,hourFormat:"24",value:this.state.task.fechaVencimiento,className:"m-2",onChange:function(t){e.setState({task:Object(k.a)({},e.state.task,{fechaVencimiento:t.value}),tasks:Object(k.a)({},e.state.tasks,Object(h.a)({},e.state.task.id,Object(k.a)({},e.state.task,{fechaVenciemiento:t.value})))});var a={tasks:Object(k.a)({},e.state.tasks,Object(h.a)({},e.state.task.id,Object(k.a)({},e.state.task,{fechaVencimiento:t.value})))};e.props.handleClick(a),m.a.database().ref("users/"+e.props.user.uid).update(a)}})))}}]),a}(n.a.Component),S=a(49),F=a(150),P={tasks:{},columns:{"column-1":{id:"column-1",title:"Inbox",taskIds:[]},"column-2":{id:"column-2",title:"Pr\xf3ximas acciones",taskIds:[]},"column-3":{id:"column-3",title:"Proyectos",taskIds:[]},"column-4":{id:"column-4",title:"Alg\xfan d\xeda",taskIds:[]},"column-5":{id:"column-5",title:"Eventos",taskIds:[]}},columnOrder:["column-1","column-2","column-3","column-4","column-5"],visible:!1,loading:!0},M=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(e){var s;return Object(l.a)(this,a),(s=t.call(this,e)).onDragEnd=function(e){var t,a=e.destination,n=e.source,o=e.draggableId;if(a&&(a.droppableId!==n.droppableId||a.index!==n.index)){var c=s.state.columns[n.droppableId],l=s.state.columns[a.droppableId];if(c===l){var r=Array.from(c.taskIds);r.splice(n.index,1),console.log(r),r.splice(a.index,0,o),console.log(r);var i=Object(k.a)({},c,{taskIds:r}),u=Object(k.a)({},s.state,{columns:Object(k.a)({},s.state.columns,Object(h.a)({},i.id,i))});return s.setState(u),void m.a.database().ref("users/"+s.props.user.uid).update(u)}var d=Array.from(c.taskIds);d.splice(n.index,1);var p=Object(k.a)({},c,{taskIds:d}),f=Array.from(l.taskIds);f.splice(a.index,0,o);var b=Object(k.a)({},l,{taskIds:f}),v=Object(k.a)({},s.state,{columns:Object(k.a)({},s.state.columns,(t={},Object(h.a)(t,p.id,p),Object(h.a)(t,b.id,b),t))});s.setState(v),m.a.database().ref("users/"+s.props.user.uid).update(v)}},s.state=P,s.showInfo=s.showInfo.bind(Object(i.a)(s)),s}return Object(r.a)(a,[{key:"componentDidMount",value:function(){var e=this;m.a.database().ref("users/"+this.props.user.uid).once("value").then((function(t){var a=t.val();if(null===a){a=e.props.initialData;var s=Object(k.a)({},a,{loading:!1});m.a.database().ref("/users/"+e.props.user.uid).update(a),e.setState(s)}else{var n={},o=a.columns,c=a.columnOrder;e.state.columnOrder.forEach((function(e){void 0===o[e].taskIds&&(o[e].taskIds=[])})),void 0!==a.tasks&&(n=a.tasks);var l={tasks:n,columns:o,columnOrder:c,loading:!1};e.setState(l)}0===j()().weekday()&&e.showInfo()}))}},{key:"onClickClose",value:function(e){this.setState(e)}},{key:"handleClick",value:function(e){console.log(e),console.log(this.state),this.setState(e)}},{key:"showInfo",value:function(){this.growl.show({sticky:!0,severity:"info",summary:"Revisar los proyectos",detail:"Organice las tareas asociadas a los proyectos"})}},{key:"render",value:function(){var e=this;return this.state.loading?n.a.createElement("div",{className:"text-center mt-5"},n.a.createElement(S.ProgressSpinner,null)):n.a.createElement(n.a.Fragment,null,n.a.createElement(F.Growl,{ref:function(t){return e.growl=t}}),!0===this.state.visible&&void 0!==this.state.task&&n.a.createElement(D,{visible:this.state.visible,task:this.state.tasks[this.state.task.id],tasks:this.state.tasks,handleClick:function(t){return e.handleClick(t)},user:this.props.user}),n.a.createElement(f.a,{onDragEnd:this.onDragEnd},n.a.createElement("div",{className:"containerPanel"},this.state.columnOrder.map((function(t){var a,s=e.state.columns[t];return a=void 0!==s.taskIds?s.taskIds.map((function(t){return e.state.tasks[t]})):[],n.a.createElement("div",{key:s.id,className:"containerColumn"},n.a.createElement(y,{user:e.props.user,key:s.id,column:s,columns:e.state.columns,tasks:a,stateTasks:e.state.tasks,onClickClose:function(t){return e.onClickClose(t)},handleClick:function(t){return e.handleClick(t)}}),n.a.createElement("button",{className:"addButton",type:"button",onClick:function(){var t=m.a.database().ref().child("/users/"+e.props.user.uid).push().key,a={tasks:Object(k.a)({},e.state.tasks,Object(h.a)({},t,{id:t,content:"Sin content",input:!0})),columns:Object(k.a)({},e.state.columns,Object(h.a)({},s.id,Object(k.a)({},s,{taskIds:s.taskIds.concat(t)})))};e.setState(a)}},"+"))})))))}}]),a}(n.a.Component),A=(a(348),a(349),a(350),a(151)),R=a(53),B=a(152),H=a(153),L=a(154),V=a.n(L),W=(a(351),function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(l.a)(this,a);for(var s=arguments.length,o=new Array(s),c=0;c<s;c++)o[c]=arguments[c];return(e=t.call.apply(t,[this].concat(o))).calendarComponentRef=n.a.createRef(),e.state={calendarWeekends:!0,calendarEvents:[],loading:!0},e.toggleWeekends=function(){e.setState({calendarWeekends:!e.state.calendarWeekends})},e.gotoPast=function(){e.calendarComponentRef.current.getApi().gotoDate("2000-01-01")},e}return Object(r.a)(a,[{key:"componentDidMount",value:function(){var e=this;m.a.database().ref("users/"+this.props.user.uid).once("value").then((function(t){var a=t.val();null===a&&(a=e.props.initialData,m.a.database().ref("/users/"+e.props.user.uid).update(a));var s=[];if(void 0!==a.tasks){var n=a.tasks;console.log(n),Object.values(n).forEach((function(e){void 0!==e.taskType&&void 0!==e.fechaFin&&void 0!==e.fechaInicio&&("Evento"===e.taskType?s.push({title:e.content,start:new Date(e.fechaInicio),end:new Date(e.fechaFin),color:"#fb8c00"}):s.push({title:e.content,start:new Date(e.fechaInicio),end:new Date(e.fechaFin),color:"#7cb342"})),e.fechaVencimiento&&s.push({title:e.content,start:e.fechaVencimiento,color:"#ffd600"})}))}var o={calendarEvents:s,loading:!1};e.setState(o)}))}},{key:"render",value:function(){return this.state.loading?n.a.createElement("div",{className:"text-center mt-5"},n.a.createElement(S.ProgressSpinner,null)):n.a.createElement(n.a.Fragment,null,n.a.createElement("div",{className:"legend-container mb-2 rounded"},n.a.createElement("ul",{className:"legend p-2"},n.a.createElement("li",null,n.a.createElement("span",{className:"evento"})," Eventos"),n.a.createElement("li",null,n.a.createElement("span",{className:"fechaVencimiento"})," Tareas con fecha de vencimiento"),n.a.createElement("li",null,n.a.createElement("span",{className:"tareaPlanificada"})," Tareas planificadas"))),n.a.createElement("div",{className:"app-calendar shadow p-4 rounded mb-3"},n.a.createElement(A.a,{locale:V.a,header:{left:"prev,next today",center:"title",right:"dayGridMonth,timeGridWeek,timeGridDay,listWeek"},plugins:[R.d,B.a,H.a],ref:this.calendarComponentRef,weekends:this.state.calendarWeekends,events:this.state.calendarEvents})))}}]),a}(n.a.Component)),z=a(155),G=a(102),U=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(e){var s;return Object(l.a)(this,a),(s=t.call(this,e)).state={colors:[],data:[],labels:[],proximasAcciones:[],eventos:[],loading:!0},s}return Object(r.a)(a,[{key:"componentDidMount",value:function(){var e=this;m.a.database().ref("users/"+this.props.user.uid).once("value").then((function(t){var a=t.val();null===a&&(a=e.props.initialData,m.a.database().ref("/users/"+e.props.user.uid).update(a));var s=[],n=[],o=[],c=[],l=[];if(void 0!==a.tasks){var r=a.tasks,i=a.columns["column-2"];void 0!==i.taskIds&&(c=i.taskIds.map((function(e){return r[e]}))),Object.values(r).forEach((function(t){if(j.a.locale("es"),void 0!==t.fechaVencimiento){var a=j()(new Date),c=j()(new Date(t.fechaVencimiento)),r=c.diff(a,"days");r>0?(s.push(c.diff(a,"days")),n.push(t.content),o.push("#fff"!==t.colorTask?t.colorTask:e.getRandomColor())):0===r&&(s.push(.5),n.push(t.content+"(Finaliza hoy)"),o.push("#fff"!==t.colorTask?t.colorTask:e.getRandomColor()))}if(void 0!==t.taskType&&"Evento"===t.taskType&&void 0!==t.fechaInicio&&void 0!==t.fechaFin){var i=j()(new Date(t.fechaFin)).diff(new Date,"days")>=0,u=j()(new Date(t.fechaInicio)).diff(new Date,"days")<=7;i&&u&&l.push(t)}}))}var u={data:s,labels:n,colors:o,proximasAcciones:c,eventos:l,loading:!1};e.setState(u)}))}},{key:"getRandomColor",value:function(){for(var e="#",t=0;t<6;t++)e+="0123456789ABCDEF"[Math.floor(16*Math.random())];return e}},{key:"render",value:function(){var e=this,t={labels:this.state.labels,datasets:[{data:this.state.data,backgroundColor:this.state.colors}]},a=[];return Object.values(this.state.proximasAcciones).forEach((function(e){a.includes(e.colorTask)||a.push(e.colorTask)})),this.state.loading?n.a.createElement("div",{className:"text-center mt-5"},n.a.createElement(S.ProgressSpinner,null)):n.a.createElement(n.a.Fragment,null,n.a.createElement("div",{className:"d-flex justify-content-center align-items-center"},n.a.createElement("div",{className:"h-50 d-flex flex-column align-items-center justify-content-center mr-5"},n.a.createElement("p",{className:"h3 mb-3"},"Tareas con fecha de vencimiento"),0===t.labels.length?n.a.createElement("p",{className:"font-weight-bold",style:{height:"200px"}},"No existen tareas con fecha de vencimiento."):n.a.createElement(z.Chart,{type:"doughnut",data:t,style:{width:"600px"}}))),n.a.createElement("div",{className:"d-flex justify-content-center"},n.a.createElement("div",{className:"d-flex flex-column align-items-center justify-content-center mr-5"},n.a.createElement("p",{className:"h3 mb-3"},"Pr\xf3ximos Eventos"),n.a.createElement(G.ScrollPanel,{style:{height:"400px",width:"500px",backgroundColor:"white"},className:"align-self-end shadow rounded p-2 mb-3"},0===this.state.eventos.length?n.a.createElement("p",{className:"font-weight-bold m-2",style:{height:"200px"}},"No tienen ning\xfan evento en los pr\xf3ximos 7 d\xedas."):this.state.eventos.map((function(e){return j.a.locale("es"),n.a.createElement("div",{key:e.id,className:"p-2 m-2 rounded shadow",style:{backgroundColor:e.colorTask,color:"#fff"===e.colorTask?"black":"white"}},e.content+": ",n.a.createElement("span",{className:"font-weight-bold"},j()(new Date(e.fechaInicio)).format("DD-MMMM HH:mm")),j()(new Date(e.fechaInicio)).format("DD-MMMM")===j()(new Date(e.fechaFin)).format("DD-MMMM")?n.a.createElement("span",{className:"font-weight-bold"},"-"+j()(new Date(e.fechaFin)).format("HH:mm")):n.a.createElement("span",{className:"font-weight-bold"}," - "+j()(new Date(e.fechaFin)).format("DD-MMMM  HH:mm")))})))),n.a.createElement("div",{className:"d-flex flex-column align-items-center justify-content-center ml-5"},n.a.createElement("p",{className:"h3 mb-3"},"Pr\xf3ximas Acciones"),n.a.createElement(G.ScrollPanel,{style:{height:"400px",width:"600px",backgroundColor:"white"},className:"align-self-end shadow rounded p-2 mb-3"},0===this.state.proximasAcciones.length?n.a.createElement("p",{className:"font-weight-bold m-2",style:{height:"200px"}},"No existen tareas en la columna de pr\xf3ximas acciones."):a.map((function(t){return n.a.createElement("div",{key:t,className:"p-3 d-flex  flex-wrap rounded m-1 ",style:{backgroundColor:t}},e.state.proximasAcciones.filter((function(e){return e.colorTask===t})).map((function(e){return n.a.createElement("div",{key:e.id,className:"p-2 m-2 rounded shadow",style:{backgroundColor:"white",color:"black",width:"150px",fontSize:"13px"}},e.content)})))}))))))}}]),a}(n.a.Component),Y=a(379),J=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(l.a)(this,a);for(var s=arguments.length,n=new Array(s),o=0;o<s;o++)n[o]=arguments[o];return(e=t.call.apply(t,[this].concat(n))).state={logout:!1},e}return Object(r.a)(a,[{key:"render",value:function(){var e,t=this;return!0===this.state.logout&&(e=n.a.createElement("button",{className:"button-logout mt-2",onClick:this.props.handleLogout},"Cerrar sesi\xf3n")),n.a.createElement("div",{className:"avatar d-flex flex-column align-items-end"},n.a.createElement(Y.a,{alt:this.props.displayName,src:this.props.photoURL,onClick:function(){return t.setState({logout:!t.state.logout})}}),e)}}]),a}(n.a.Component),K=a(61),Q=a(39),Z={tasks:{},columns:{"column-1":{id:"column-1",title:"Inbox",taskIds:[]},"column-2":{id:"column-2",title:"Pr\xf3ximas acciones",taskIds:[]},"column-3":{id:"column-3",title:"Proyectos",taskIds:[]},"column-4":{id:"column-4",title:"Alg\xfan d\xeda",taskIds:[]},"column-5":{id:"column-5",title:"Eventos",taskIds:[]}},columnOrder:["column-1","column-2","column-3","column-4","column-5"],visible:!1,loading:!0},q=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(){var e;return Object(l.a)(this,a),(e=t.call(this)).state={user:null,logout:!1},e.handleAuth=e.handleAuth.bind(Object(i.a)(e)),e.handleLogout=e.handleLogout.bind(Object(i.a)(e)),e}return Object(r.a)(a,[{key:"componentDidMount",value:function(){var e=this;m.a.auth().onAuthStateChanged((function(t){void 0!==t&&e.setState({user:t})}))}},{key:"handleAuth",value:function(){var e=new m.a.auth.GoogleAuthProvider;m.a.auth().signInWithPopup(e).then((function(e){return console.log("".concat(e.user.email," ha iniciado sesi\xf3n"))})).catch((function(e){return console.log("Error ".concat(e.code,": ").concat(e.message))}))}},{key:"handleLogout",value:function(){m.a.auth().signOut().then((function(e){return console.log("".concat(e.user.email," ha salido"))})).catch((function(e){return console.log("Error ".concat(e.code,": ").concat(e.message))})),this.setState({logout:!1})}},{key:"renderLoginButton",value:function(){var e=this;return this.state.user?n.a.createElement(n.a.Fragment,null,n.a.createElement(K.a,null,n.a.createElement("div",{className:"d-flex justify-content-center"},n.a.createElement("nav",{style:{minWidth:"600px"},className:"d-flex mt-4 mb-5 justify-content-around navContainer rounded shadow "},n.a.createElement("div",{className:"p-2"},n.a.createElement(K.b,{exact:!0,to:"/",activeClassName:"activeNavItem"},"Visualizar")),n.a.createElement("div",{className:"p-2"},n.a.createElement(K.b,{to:"/tablero",activeClassName:"activeNavItem"},"Tablero")),n.a.createElement("div",{className:"p-2"},n.a.createElement(K.b,{to:"/calendario",activeClassName:"activeNavItem"},"Calendario"))),n.a.createElement(J,{displayName:this.state.user.displayName,photoURL:this.state.user.photoURL,handleLogout:function(){return e.handleLogout()}})),n.a.createElement(Q.c,null,n.a.createElement(Q.a,{exact:!0,path:"/"},n.a.createElement("div",null,n.a.createElement(U,{user:this.state.user,initialData:Z}))),n.a.createElement(Q.a,{exact:!0,path:"/tablero"},n.a.createElement("div",null,n.a.createElement(M,{user:this.state.user,initialData:Z}))),n.a.createElement(Q.a,{exact:!0,path:"/calendario"},n.a.createElement("div",null,n.a.createElement(W,{user:this.state.user,initialData:Z}))),n.a.createElement(Q.a,{exact:!0,path:"*"},n.a.createElement("div",null,n.a.createElement("p",{class:"h1"},"Oops!"),n.a.createElement("p",{class:"h2"},"No se encuentra la ruta especificada")))))):n.a.createElement("div",{className:" loginBackground divComplete d-flex login align-items-center justify-content-center text-center"},n.a.createElement("div",{className:"loginContainer d-flex flex-column align-items-center justify-content-center"},n.a.createElement("div",null,n.a.createElement("h1",{className:"loginHeader"},"Getting Things Done"),n.a.createElement("button",{onClick:this.handleAuth,className:"buttonLogin"},n.a.createElement("span",{className:"fa fa-google p-2"}),"Entra con google"))))}},{key:"render",value:function(){return n.a.createElement("div",{className:"divComplete"},this.renderLoginButton())}}]),a}(n.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var X=a(157);a.n(X).a.initializeApp({apiKey:"AIzaSyDNJIa3VYqtLI4LOs6ZYcYDZbsQpKcUW-c",authDomain:"tfg-proyect.firebaseapp.com",databaseURL:"https://tfg-proyect.firebaseio.com",projectId:"tfg-proyect",storageBucket:"tfg-proyect.appspot.com",messagingSenderId:"964870376777",appId:"1:964870376777:web:089d60e652f3b988f3de98",measurementId:"G-CSPLBXW7YT"}),c.a.render(n.a.createElement(q,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[160,1,2]]]);
//# sourceMappingURL=main.897ab158.chunk.js.map